--buff_tag

local _lang = "cn"
local _isExist = false

-- key
local __key_map = {
  id = 1,    --效果id-int 

}

-- key type
local __key_type = {
  id = "int",    --效果id-1 

}


-- data
local buff_tag = {
    _data = {
        [1] = {2101,},
        [2] = {2102,},
        [3] = {2103,},
        [4] = {2104,},
        [5] = {2105,},
        [6] = {2106,},
        [7] = {2107,},
        [8] = {2108,},
        [9] = {2109,},
        [10] = {2110,},
        [11] = {2111,},
        [12] = {2112,},
        [13] = {2113,},
        [14] = {2114,},
        [15] = {2115,},
        [16] = {2116,},
        [17] = {2117,},
        [18] = {2118,},
        [19] = {2119,},
        [20] = {2120,},
        [21] = {2121,},
        [22] = {2201,},
        [23] = {2202,},
        [24] = {2203,},
        [25] = {2204,},
        [26] = {2205,},
        [27] = {2301,},
        [28] = {2302,},
        [29] = {2303,},
        [30] = {2304,},
        [31] = {2306,},
        [32] = {2307,},
        [33] = {2308,},
        [34] = {2309,},
        [35] = {2310,},
        [36] = {2311,},
        [37] = {2313,},
        [38] = {2315,},
        [39] = {2318,},
        [40] = {2330,},
        [41] = {2332,},
        [42] = {2334,},
        [43] = {2335,},
        [44] = {2336,},
        [45] = {2337,},
        [46] = {2338,},
        [47] = {2339,},
        [48] = {2340,},
        [49] = {2341,},
        [50] = {2343,},
        [51] = {2344,},
        [52] = {2345,},
        [53] = {2346,},
        [54] = {2347,},
        [55] = {2348,},
        [56] = {2349,},
        [57] = {2350,},
        [58] = {2351,},
        [59] = {2352,},
        [60] = {2353,},
        [61] = {2354,},
        [62] = {2355,},
        [63] = {2356,},
        [64] = {2357,},
        [65] = {2358,},
        [66] = {2359,},
        [67] = {2360,},
        [68] = {2361,},
        [69] = {2362,},
        [70] = {2363,},
        [71] = {2364,},
        [72] = {2365,},
        [73] = {2366,},
        [74] = {2367,},
        [75] = {2368,},
        [76] = {2369,},
        [77] = {2370,},
        [78] = {2371,},
        [79] = {2372,},
        [80] = {2373,},
        [81] = {2374,},
        [82] = {2375,},
        [83] = {2376,},
        [84] = {2377,},
        [85] = {2378,},
        [86] = {2379,},
        [87] = {2380,},
        [88] = {2381,},
        [89] = {2382,},
        [90] = {2383,},
        [91] = {2384,},
        [92] = {2385,},
        [93] = {2386,},
        [94] = {2387,},
        [95] = {2388,},
        [96] = {2389,},
        [97] = {2390,},
        [98] = {2391,},
        [99] = {2392,},
        [100] = {2393,},
        [101] = {2394,},
        [102] = {2395,},
        [103] = {2396,},
        [104] = {2397,},
        [105] = {2398,},
        [106] = {2399,},
        [107] = {2400,},
        [108] = {2401,},
        [109] = {2402,},
        [110] = {2403,},
        [111] = {2404,},
        [112] = {2405,},
        [113] = {2406,},
        [114] = {2407,},
        [115] = {2408,},
        [116] = {2409,},
        [117] = {2410,},
        [118] = {2411,},
        [119] = {2412,},
        [120] = {2413,},
        [121] = {2414,},
        [122] = {2415,},
        [123] = {2416,},
        [124] = {2417,},
        [125] = {2418,},
        [126] = {2419,},
        [127] = {2420,},
        [128] = {2421,},
        [129] = {2422,},
        [130] = {2423,},
        [131] = {2424,},
        [132] = {2425,},
        [133] = {2426,},
        [134] = {2427,},
        [135] = {2428,},
        [136] = {2429,},
        [137] = {2430,},
        [138] = {2432,},
        [139] = {2433,},
        [140] = {2434,},
        [141] = {2435,},
        [142] = {3001,},
        [143] = {3002,},
        [144] = {3003,},
        [145] = {3004,},
        [146] = {3005,},
    }
}

-- index
local __index_id = {
    [2101] = 1,
    [2102] = 2,
    [2103] = 3,
    [2104] = 4,
    [2105] = 5,
    [2106] = 6,
    [2107] = 7,
    [2108] = 8,
    [2109] = 9,
    [2110] = 10,
    [2111] = 11,
    [2112] = 12,
    [2113] = 13,
    [2114] = 14,
    [2115] = 15,
    [2116] = 16,
    [2117] = 17,
    [2118] = 18,
    [2119] = 19,
    [2120] = 20,
    [2121] = 21,
    [2201] = 22,
    [2202] = 23,
    [2203] = 24,
    [2204] = 25,
    [2205] = 26,
    [2301] = 27,
    [2302] = 28,
    [2303] = 29,
    [2304] = 30,
    [2306] = 31,
    [2307] = 32,
    [2308] = 33,
    [2309] = 34,
    [2310] = 35,
    [2311] = 36,
    [2313] = 37,
    [2315] = 38,
    [2318] = 39,
    [2330] = 40,
    [2332] = 41,
    [2334] = 42,
    [2335] = 43,
    [2336] = 44,
    [2337] = 45,
    [2338] = 46,
    [2339] = 47,
    [2340] = 48,
    [2341] = 49,
    [2343] = 50,
    [2344] = 51,
    [2345] = 52,
    [2346] = 53,
    [2347] = 54,
    [2348] = 55,
    [2349] = 56,
    [2350] = 57,
    [2351] = 58,
    [2352] = 59,
    [2353] = 60,
    [2354] = 61,
    [2355] = 62,
    [2356] = 63,
    [2357] = 64,
    [2358] = 65,
    [2359] = 66,
    [2360] = 67,
    [2361] = 68,
    [2362] = 69,
    [2363] = 70,
    [2364] = 71,
    [2365] = 72,
    [2366] = 73,
    [2367] = 74,
    [2368] = 75,
    [2369] = 76,
    [2370] = 77,
    [2371] = 78,
    [2372] = 79,
    [2373] = 80,
    [2374] = 81,
    [2375] = 82,
    [2376] = 83,
    [2377] = 84,
    [2378] = 85,
    [2379] = 86,
    [2380] = 87,
    [2381] = 88,
    [2382] = 89,
    [2383] = 90,
    [2384] = 91,
    [2385] = 92,
    [2386] = 93,
    [2387] = 94,
    [2388] = 95,
    [2389] = 96,
    [2390] = 97,
    [2391] = 98,
    [2392] = 99,
    [2393] = 100,
    [2394] = 101,
    [2395] = 102,
    [2396] = 103,
    [2397] = 104,
    [2398] = 105,
    [2399] = 106,
    [2400] = 107,
    [2401] = 108,
    [2402] = 109,
    [2403] = 110,
    [2404] = 111,
    [2405] = 112,
    [2406] = 113,
    [2407] = 114,
    [2408] = 115,
    [2409] = 116,
    [2410] = 117,
    [2411] = 118,
    [2412] = 119,
    [2413] = 120,
    [2414] = 121,
    [2415] = 122,
    [2416] = 123,
    [2417] = 124,
    [2418] = 125,
    [2419] = 126,
    [2420] = 127,
    [2421] = 128,
    [2422] = 129,
    [2423] = 130,
    [2424] = 131,
    [2425] = 132,
    [2426] = 133,
    [2427] = 134,
    [2428] = 135,
    [2429] = 136,
    [2430] = 137,
    [2432] = 138,
    [2433] = 139,
    [2434] = 140,
    [2435] = 141,
    [3001] = 142,
    [3002] = 143,
    [3003] = 144,
    [3004] = 145,
    [3005] = 146,

}

-- metatable
local mt = { 
    __index = function(t, k) 
        assert(__key_map[k], "cannot find " .. k .. " in buff_tag")
        if _lang ~= "cn" and _isExist  and t._lang_key_map[k] then
            return t._lang[t._lang_key_map[k]]
        end
        return t._raw[__key_map[k]]
    end
}

-- 
function buff_tag.length()
    return #buff_tag._data
end

-- 
function buff_tag.hasKey(k)
    if __key_map[k] == nil then
        return false
    else
        return true
    end
end

--
function buff_tag.indexOf(index)
    if index == nil or not buff_tag._data[index] then
        return nil
    end
    if Lang.lang ~= "cn" and Lang.lang ~= _lang then 
        _lang = Lang.lang 
        if Lang.isFileExist("app/i18n/".. _lang .."/config/buff_tag.lua") then _isExist =  true end
    end
    if _lang ~= "cn" and _isExist then
        local table = require( "app.i18n.".. _lang ..".config." .. "buff_tag" )
        return setmetatable({_raw = buff_tag._data[index], _lang=table._data[index], _lang_key_map=table.__key_map}, mt)
    end
    return setmetatable({_raw = buff_tag._data[index]}, mt)
end

--
function buff_tag.get(id)
    
    return buff_tag.indexOf(__index_id[id])
        
end

--
function buff_tag.set(id, key, value)
    local record = buff_tag.get(id)
    if record then
        local keyIndex = __key_map[key]
        if keyIndex then
            record._raw[keyIndex] = value
        end
    end
end

--
function buff_tag.index()
    return __index_id
end

return buff_tag